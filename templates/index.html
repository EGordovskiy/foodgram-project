{% extends 'base.html' %}
{% block title %}Recipes{% endblock %}
{% load static %}
{% csrf_token %}
{% block static %}
<link rel='stylesheet' href={% static 'pages/index.css' %}
{% endblock static %}
{% block index %} <li class='nav__item nav__item_active'> {% endblock index %}
{% comment %} {% load user_filters %} {% endcomment %}
{% load templates_filters %}

{% block content %}

<main class="main container">
        <div class="main__header">
            <h1 class="main__title">Recipes</h1>
            <ul class="tags">

    {% for tag in all_tags %}
    
        <li class="tags__item">
        <a 
            id='{{ tag.slug }}'
            class='tags__checkbox tags__checkbox_style_{{ tag.color }} 
            {% if tag.slug in request.GET|get_filter_values %} tags__checkbox_active {% endif %}'
            href='{% url 'index' %}?{{ request|get_filter_link:tag }}'></a>
            <span class='tags__label'>{{ tag.name }}</span>
        </li>
    
    {% endfor %}
            </ul>

        </div>
        <div class='card-list'>
            <!-- Вывод ленты записей -->
                {% for recipe in page %}
                    {% include 'recipe.html' %}
                {% endfor %}
        </div>
        <!-- Вывод паджинатора -->
        {% include "paginator.html" %}
</main>

<script src="./js/config/config.js"></script>
{% if user.is_authenticated %}
<script src="./js/components/MainCards.js"></script>
<script src="./js/components/Purchases.js"></script>
<script src="./js/components/Favorites.js"></script>
<script src="./js/components/CardList.js"></script>
<script src="./js/components/Header.js"></script>
<script src="./js/api/Api.js"></script>
<script src="indexAuth.js"></script>
{% else %}
<script src="./js/components/MainCards.js"></script>
<script src="./js/components/Purchases.js"></script>
<script src="./js/components/CardList.js"></script>
<script src="./js/components/Header.js"></script>
<script src="./js/api/Api.js"></script>
<script src="indexNotAuth.js"></script>
{% endif %}
{% endblock %}
